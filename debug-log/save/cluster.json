{
 "@type": "type.googleapis.com/envoy.admin.v3.ClustersConfigDump",
 "static_clusters": [
  {
  "cluster": {
   "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
   "name": "agent",
   "type": "STATIC",
   "connect_timeout": "0.250s",
   "load_assignment": {
    "cluster_name": "agent",
    "endpoints": [{
     "lb_endpoints": [{
      "endpoint": {
       "address": {
        "socket_address": {
         "address": "127.0.0.1",
         "port_value": 15020
        }
       }
      }
     }]
    }]
   }
  },
  "last_updated": "2022-10-08T07:44:51.770Z"
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "prometheus_stats",
    "type": "STATIC",
    "connect_timeout": "0.250s",
    "load_assignment": {
     "cluster_name": "prometheus_stats",
     "endpoints": [{
      "lb_endpoints": [{
       "endpoint": {
        "address": {
         "socket_address": {
          "address": "127.0.0.1",
          "port_value": 15000
         }
        }
       }
      }]
     }]
    }
   },
   "last_updated": "2022-10-08T07:44:51.769Z"
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "sds-grpc",
    "type": "STATIC",
    "connect_timeout": "1s",
    "load_assignment": {
     "cluster_name": "sds-grpc",
     "endpoints": [{
      "lb_endpoints": [{
       "endpoint": {
        "address": {
         "pipe": {
          "path": "./var/run/secrets/workload-spiffe-uds/socket"
         }
        }
       }
      }]
     }]
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "explicit_http_config": {
       "http2_protocol_options": {}
      }
     }
    }
   },
   "last_updated": "2022-10-08T07:44:51.770Z"
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "xds-grpc",
    "type": "STATIC",
    "connect_timeout": "1s",
    "max_requests_per_connection": 1,
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 100000,
      "max_pending_requests": 100000,
      "max_requests": 100000
     },
      {
       "priority": "HIGH",
       "max_connections": 100000,
       "max_pending_requests": 100000,
       "max_requests": 100000
      }
     ]
    },
    "upstream_connection_options": {
     "tcp_keepalive": {
      "keepalive_time": 300
     }
    },
    "load_assignment": {
     "cluster_name": "xds-grpc",
     "endpoints": [{
      "lb_endpoints": [{
       "endpoint": {
        "address": {
         "pipe": {
          "path": "./etc/istio/proxy/XDS"
         }
        }
       }
      }]
     }]
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "explicit_http_config": {
       "http2_protocol_options": {}
      }
     }
    }
   },
   "last_updated": "2022-10-08T07:44:51.785Z"
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "zipkin",
    "type": "STRICT_DNS",
    "connect_timeout": "1s",
    "dns_refresh_rate": "30s",
    "dns_lookup_family": "V4_ONLY",
    "load_assignment": {
     "cluster_name": "zipkin",
     "endpoints": [{
      "lb_endpoints": [{
       "endpoint": {
        "address": {
         "socket_address": {
          "address": "zipkin.istio-system",
          "port_value": 9411
         }
        }
       }
      }]
     }]
    },
    "respect_dns_ttl": true
   },
   "last_updated": "2022-10-08T07:44:51.786Z"
  }
 ],
 "dynamic_active_clusters": [
  {
  "cluster": {
   "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
   "name": "BlackHoleCluster",
   "type": "STATIC",
   "connect_timeout": "10s"
  }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "InboundPassthroughClusterIpv4",
    "type": "ORIGINAL_DST",
    "connect_timeout": "10s",
    "lb_policy": "CLUSTER_PROVIDED",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "upstream_bind_config": {
     "source_address": {
      "address": "127.0.0.6",
      "port_value": 0
     }
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "use_downstream_protocol_config": {
       "http_protocol_options": {},
       "http2_protocol_options": {}
      }
     }
    }
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "PassthroughCluster",
    "type": "ORIGINAL_DST",
    "connect_timeout": "10s",
    "lb_policy": "CLUSTER_PROVIDED",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "use_downstream_protocol_config": {
       "http_protocol_options": {},
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }]
   },
   "last_updated": "2022-10-08T07:44:51.815Z"
  },
  {
   "version_info": "2022-10-08T07:31:27Z/5",
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|15010||istiod.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|15010||istiod.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 15010,
       "services": [{
        "host": "istiod.istio-system.svc.cluster.local",
        "namespace": "istio-system",
        "name": "istiod"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "explicit_http_config": {
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio",
         "h2"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istiod"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.15010_._.istiod.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|15012||istiod.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|15012||istiod.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "services": [{
        "host": "istiod.istio-system.svc.cluster.local",
        "namespace": "istio-system",
        "name": "istiod"
       }],
       "default_original_port": 15012
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istiod"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.15012_._.istiod.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|15014||istiod.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|15014||istiod.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 15014,
       "services": [{
        "host": "istiod.istio-system.svc.cluster.local",
        "namespace": "istio-system",
        "name": "istiod"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istiod"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.15014_._.istiod.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|15021||istio-ingressgateway.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|15021||istio-ingressgateway.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "services": [{
        "name": "istio-ingressgateway",
        "namespace": "istio-system",
        "host": "istio-ingressgateway.istio-system.svc.cluster.local"
       }],
       "default_original_port": 15021
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "use_downstream_protocol_config": {
       "http_protocol_options": {},
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.15021_._.istio-ingressgateway.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   },
   "last_updated": "2022-10-08T07:44:51.813Z"
  },
  {
   "version_info": "2022-10-08T07:31:27Z/5",
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|443||istio-ingressgateway.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|443||istio-ingressgateway.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 443,
       "services": [{
        "name": "istio-ingressgateway",
        "host": "istio-ingressgateway.istio-system.svc.cluster.local",
        "namespace": "istio-system"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.443_._.istio-ingressgateway.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|443||istiod.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|443||istiod.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 443,
       "services": [{
        "host": "istiod.istio-system.svc.cluster.local",
        "namespace": "istio-system",
        "name": "istiod"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istiod"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.443_._.istiod.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|443||kubernetes.default.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|443||kubernetes.default.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 443,
       "services": [{
        "host": "kubernetes.default.svc.cluster.local",
        "name": "kubernetes",
        "namespace": "default"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {},
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.443_._.kubernetes.default.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|53||kube-dns.kube-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|53||kube-dns.kube-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 53,
       "services": [{
        "host": "kube-dns.kube-system.svc.cluster.local",
        "namespace": "kube-system",
        "name": "kube-dns"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/kube-system/sa/coredns"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.53_._.kube-dns.kube-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   },
   "last_updated": "2022-10-08T07:44:51.809Z"
  },
  {
   "version_info": "2022-10-08T07:31:27Z/5",
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|8000||hello-world-client-service.breakdown-test.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|8000||hello-world-client-service.breakdown-test.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "services": [{
        "host": "hello-world-client-service.breakdown-test.svc.cluster.local",
        "name": "hello-world-client-service",
        "namespace": "breakdown-test"
       }],
       "default_original_port": 8000
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "use_downstream_protocol_config": {
       "http_protocol_options": {},
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {},
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.8000_._.hello-world-client-service.breakdown-test.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|8080||hello-world-server-service.breakdown-test.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|8080||hello-world-server-service.breakdown-test.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 8080,
       "services": [{
        "name": "hello-world-server-service",
        "namespace": "breakdown-test",
        "host": "hello-world-server-service.breakdown-test.svc.cluster.local"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "use_downstream_protocol_config": {
       "http_protocol_options": {},
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {},
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.8080_._.hello-world-server-service.breakdown-test.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|80||istio-ingressgateway.istio-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|80||istio-ingressgateway.istio-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "default_original_port": 80,
       "services": [{
        "name": "istio-ingressgateway",
        "namespace": "istio-system",
        "host": "istio-ingressgateway.istio-system.svc.cluster.local"
       }]
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "explicit_http_config": {
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio",
         "h2"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/istio-system/sa/istio-ingressgateway-service-account"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.80_._.istio-ingressgateway.istio-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|80||p-manager-svc.p-manager.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|80||p-manager-svc.p-manager.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "services": [{
        "name": "p-manager-svc",
        "host": "p-manager-svc.p-manager.svc.cluster.local",
        "namespace": "p-manager"
       }],
       "default_original_port": 80
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/p-manager/sa/p-manager-account"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.80_._.p-manager-svc.p-manager.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  },
  {
   "cluster": {
    "@type": "type.googleapis.com/envoy.config.cluster.v3.Cluster",
    "name": "outbound|9153||kube-dns.kube-system.svc.cluster.local",
    "type": "EDS",
    "eds_cluster_config": {
     "eds_config": {
      "ads": {},
      "initial_fetch_timeout": "0s",
      "resource_api_version": "V3"
     },
     "service_name": "outbound|9153||kube-dns.kube-system.svc.cluster.local"
    },
    "connect_timeout": "10s",
    "lb_policy": "LEAST_REQUEST",
    "circuit_breakers": {
     "thresholds": [{
      "max_connections": 4294967295,
      "max_pending_requests": 4294967295,
      "max_requests": 4294967295,
      "max_retries": 4294967295,
      "track_remaining": true
     }]
    },
    "metadata": {
     "filter_metadata": {
      "istio": {
       "services": [{
        "host": "kube-dns.kube-system.svc.cluster.local",
        "namespace": "kube-system",
        "name": "kube-dns"
       }],
       "default_original_port": 9153
      }
     }
    },
    "common_lb_config": {
     "locality_weighted_lb_config": {}
    },
    "typed_extension_protocol_options": {
     "envoy.extensions.upstreams.http.v3.HttpProtocolOptions": {
      "@type": "type.googleapis.com/envoy.extensions.upstreams.http.v3.HttpProtocolOptions",
      "use_downstream_protocol_config": {
       "http_protocol_options": {},
       "http2_protocol_options": {}
      }
     }
    },
    "filters": [{
     "name": "istio.metadata_exchange",
     "typed_config": {
      "@type": "type.googleapis.com/envoy.tcp.metadataexchange.config.MetadataExchange",
      "protocol": "istio-peer-exchange"
     }
    }],
    "transport_socket_matches": [{
     "name": "tlsMode-istio",
     "match": {
      "tlsMode": "istio"
     },
     "transport_socket": {
      "name": "envoy.transport_sockets.tls",
      "typed_config": {
       "@type": "type.googleapis.com/envoy.extensions.transport_sockets.tls.v3.UpstreamTlsContext",
       "common_tls_context": {
        "tls_params": {
         "tls_minimum_protocol_version": "TLSv1_2",
         "tls_maximum_protocol_version": "TLSv1_3"
        },
        "alpn_protocols": [
         "istio-peer-exchange",
         "istio"
        ],
        "tls_certificate_sds_secret_configs": [{
         "name": "default",
         "sds_config": {
          "api_config_source": {
           "api_type": "GRPC",
           "grpc_services": [{
            "envoy_grpc": {
             "cluster_name": "sds-grpc"
            }
           }],
           "set_node_on_first_message_only": true,
           "transport_api_version": "V3"
          },
          "initial_fetch_timeout": "0s",
          "resource_api_version": "V3"
         }
        }],
        "combined_validation_context": {
         "default_validation_context": {
          "match_subject_alt_names": [{
           "exact": "spiffe://cluster.local/ns/kube-system/sa/coredns"
          }]
         },
         "validation_context_sds_secret_config": {
          "name": "ROOTCA",
          "sds_config": {
           "api_config_source": {
            "api_type": "GRPC",
            "grpc_services": [{
             "envoy_grpc": {
              "cluster_name": "sds-grpc"
             }
            }],
            "set_node_on_first_message_only": true,
            "transport_api_version": "V3"
           },
           "initial_fetch_timeout": "0s",
           "resource_api_version": "V3"
          }
         }
        }
       },
       "sni": "outbound_.9153_._.kube-dns.kube-system.svc.cluster.local"
      }
     }
    },
     {
      "name": "tlsMode-disabled",
      "match": {},
      "transport_socket": {
       "name": "envoy.transport_sockets.raw_buffer",
       "typed_config": {
        "@type": "type.googleapis.com/envoy.extensions.transport_sockets.raw_buffer.v3.RawBuffer"
       }
      }
     }
    ]
   }
  }
 ]
}